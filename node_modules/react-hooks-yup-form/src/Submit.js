import React, { useContext } from "react";
import PropTypes from "prop-types";

import FormContext from "./FormContext";

function Submit({ children, disableIfInvalid, ...rest }) {
  const { isSubmitting, isValid } = useContext(FormContext);
  const disabled = disableIfInvalid && !isValid;

  return (
    <button {...rest} type="submit" disabled={isSubmitting || disabled}>
      {children}
    </button>
  );
}

Submit.propTypes = {
  disableIfInvalid: PropTypes.bool
};

Submit.defaultProps = {
  disableIfInvalid: false
};

export default Submit;
