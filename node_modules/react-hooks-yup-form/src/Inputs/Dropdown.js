import React from "react";
import PropTypes from "prop-types";
import { inputType, inputDefaults } from "../types";
import Input from "./Input";
import Error from "./Error";
import Label from "./Label";

const placeholderOptionValue = "";

const Dropdown = ({
  name,
  value,
  label,
  error,
  touched,
  options,
  placeholder,
  ...rest
}) => {
  const showPlaceholder = !value && !!placeholder;

  return (
    <div>
      <Label text={label} />
      <select name={name} value={value} {...rest}>
        {[
          showPlaceholder && (
            <option value={placeholderOptionValue} key={placeholderOptionValue}>
              {placeholder}
            </option>
          ),
          ...options.map(option => (
            <option value={option.value} key={option.value}>
              {option.label}
            </option>
          ))
        ]}
      </select>
      <Error touched={touched} error={error} />
    </div>
  );
};

Input.propTypes = {
  ...inputType,
  options: PropTypes.arrayOf(
    PropTypes.shape({
      value: PropTypes.string,
      label: PropTypes.string
    })
  )
};

Input.defaultProps = {
  ...inputDefaults,
  options: []
};

export default Dropdown;
